# –ê–¥—Ä–µ—Å–Ω—ã–µ MQTT –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## –û–±–∑–æ—Ä

–ù–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ **v2.3.4**, Fandomon –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–∞–¥—Ä–µ—Å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º, –∫–æ–≥–¥–∞ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Fandomon –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–ª–∞–Ω—à–µ—Ç–∞—Ö/—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ö–∞–∂–¥–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ Fandomon –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ **–î–í–ê —Ç–æ–ø–∏–∫–∞ MQTT**:

1. **–®–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω—ã–π —Ç–æ–ø–∏–∫** (–≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ–ª—É—á–∞—é—Ç): `fandomon/commands`
2. **–ê–¥—Ä–µ—Å–Ω—ã–π —Ç–æ–ø–∏–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** (—Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ): `fandomon/{device_id}/commands`

–ì–¥–µ `{device_id}` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —É–∫–∞–∑–∞–ª–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Fandomon.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–æ–ø–∏–∫–æ–≤

### –ö–æ–º–∞–Ω–¥–∞ –≤—Å–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º (—à–∏—Ä–æ–∫–æ–≤–µ—â–∞–Ω–∏–µ)
```
–¢–æ–ø–∏–∫: fandomon/commands
–°–æ–æ–±—â–µ–Ω–∏–µ: {"command": "restart_fandomat"}
```
‚Üí **–í–°–ï —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** –≤—ã–ø–æ–ª–Ω—è—Ç —ç—Ç—É –∫–æ–º–∞–Ω–¥—É

### –ö–æ–º–∞–Ω–¥–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É (–∞–¥—Ä–µ—Å–Ω–∞—è)
```
–¢–æ–ø–∏–∫: fandomon/sklad-a/commands
–°–æ–æ–±—â–µ–Ω–∏–µ: {"command": "restart_fandomat"}
```
‚Üí **–¢–û–õ–¨–ö–û** —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å `device_id = "sklad-a"` –≤—ã–ø–æ–ª–Ω–∏—Ç –∫–æ–º–∞–Ω–¥—É

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π: –£ –≤–∞—Å 3 –ø–ª–∞–Ω—à–µ—Ç–∞ –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö

- **–ü–ª–∞–Ω—à–µ—Ç 1** (–°–∫–ª–∞–¥ –ê): `device_id = "sklad-a"`
- **–ü–ª–∞–Ω—à–µ—Ç 2** (–°–∫–ª–∞–¥ –ë): `device_id = "sklad-b"`
- **–ü–ª–∞–Ω—à–µ—Ç 3** (–û—Ñ–∏—Å): `device_id = "ofis"`

#### –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –í–°–ï–ú –ø–ª–∞–Ω—à–µ—Ç–∞–º
```bash
mosquitto_pub -h broker.hivemq.com -p 1883 \
  -u "username" -P "password" \
  -t "fandomon/commands" \
  -m '{"command": "restart_fandomat"}'
```
‚Üí –í—Å–µ 3 –ø–ª–∞–Ω—à–µ—Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç—è—Ç Fandomat

#### –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –¢–û–õ–¨–ö–û –ø–ª–∞–Ω—à–µ—Ç—É –Ω–∞ –°–∫–ª–∞–¥–µ –ê
```bash
mosquitto_pub -h broker.hivemq.com -p 1883 \
  -u "username" -P "password" \
  -t "fandomon/sklad-a/commands" \
  -m '{"command": "restart_fandomat"}'
```
‚Üí –¢–æ–ª—å–∫–æ –ø–ª–∞–Ω—à–µ—Ç –Ω–∞ –°–∫–ª–∞–¥–µ –ê –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç Fandomat

#### –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑–Ω—ã–º –ø–ª–∞–Ω—à–µ—Ç–∞–º
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Fandomat –Ω–∞ –°–∫–ª–∞–¥–µ –ê
mosquitto_pub -h broker.hivemq.com -p 1883 \
  -u "username" -P "password" \
  -t "fandomon/sklad-a/commands" \
  -m '{"command": "restart_fandomat"}'

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ –°–∫–ª–∞–¥–µ –ë
mosquitto_pub -h broker.hivemq.com -p 1883 \
  -u "username" -P "password" \
  -t "fandomon/sklad-b/commands" \
  -m '{"command": "stop_monitoring"}'

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å –æ—Ñ–∏—Å–Ω–æ–≥–æ –ø–ª–∞–Ω—à–µ—Ç–∞
mosquitto_pub -h broker.hivemq.com -p 1883 \
  -u "username" -P "password" \
  -t "fandomon/ofis/commands" \
  -m '{"command": "send_status"}'

# –ò–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –°–∫–ª–∞–¥–µ –ê –Ω–∞ 3 –º–∏–Ω—É—Ç—ã
mosquitto_pub -h broker.hivemq.com -p 1883 \
  -u "username" -P "password" \
  -t "fandomon/sklad-a/commands" \
  -m '{"command":"UPDATE_SETTINGS","parameters":{"check_interval":"3"}}'

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è (–ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
mosquitto_pub -h broker.hivemq.com -p 1883 \
  -u "username" -P "password" \
  -t "fandomon/sklad-a/commands" \
  -m '{"command":"restart_fandomon"}'
```

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Å —à–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω—ã–º–∏, —Ç–∞–∫ –∏ —Å –∞–¥—Ä–µ—Å–Ω—ã–º–∏ —Ç–æ–ø–∏–∫–∞–º–∏:

### 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Fandomat
```json
{"command": "restart_fandomat"}
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```json
{"command": "start_monitoring"}
```

### 3. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```json
{"command": "stop_monitoring"}
```

### 4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
```json
{"command": "send_status"}
```

### 5. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è
```json
   {"command": "sync_events"}
```

### 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Fandomon
```json
{"command": "restart_fandomon"}
```

### 7. –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```json
{
  "command": "UPDATE_SETTINGS",
  "parameters": {
    "check_interval": "5",
    "status_interval": "10",
    "device_name": "–ù–æ–≤–æ–µ –∏–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞"
  }
}
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `check_interval` - –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ Fandomat (–≤ –º–∏–Ω—É—Ç–∞—Ö)
- `status_interval` - –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ (–≤ –º–∏–Ω—É—Ç–∞—Ö)
- `device_name` - –∏–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

**–ü—Ä–∏–º–µ—Ä—ã:**

–ò–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏:
```json
{"command": "UPDATE_SETTINGS", "parameters": {"check_interval": "3"}}
```

–ò–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å—Ç–∞—Ç—É—Å–∞:
```json
{"command": "UPDATE_SETTINGS", "parameters": {"status_interval": "15"}}
```

–ò–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –∏–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:
```json
{"command": "UPDATE_SETTINGS", "parameters": {"device_name": "–ü–ª–∞–Ω—à–µ—Ç –°–∫–ª–∞–¥ –ê"}}
```

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–º–∞–Ω–¥–æ–π `restart_fandomon` —á—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
```bash
# –®–∞–≥ 1: –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
mosquitto_pub -t "fandomon/rvm206/commands" \
  -m '{"command":"UPDATE_SETTINGS","parameters":{"check_interval":"5"}}'

# –®–∞–≥ 2: –ü—Ä–∏–º–µ–Ω–∏—Ç—å (–ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
mosquitto_pub -t "fandomon/rvm206/commands" \
  -m '{"command":"restart_fandomon"}'
```

### 8. –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É —Å–æ–±—ã—Ç–∏–π
```json
{"command": "clear_events"}
```

**–û–ø–∏—Å–∞–Ω–∏–µ:** –û—á–∏—â–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π Room. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö —Å–æ–±—ã—Ç–∏–π –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ MQTT.

**–ü—Ä–∏–º–µ—Ä bash:**
```bash
# –û—á–∏—Å—Ç–∏—Ç—å —Å–æ–±—ã—Ç–∏—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
mosquitto_pub -h broker.hivemq.com -p 1883 \
  -u "username" -P "password" \
  -t "fandomon/sklad-a/commands" \
  -m '{"command": "clear_events"}'

# –û—á–∏—Å—Ç–∏—Ç—å —Å–æ–±—ã—Ç–∏—è –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
mosquitto_pub -h broker.hivemq.com -p 1883 \
  -u "username" -P "password" \
  -t "fandomon/commands" \
  -m '{"command": "clear_events"}'
```

**–û—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ MQTT:**
```json
{
  "event_type": "COMMAND_CLEAR_EVENTS",
  "message": "Local events database cleared",
  "timestamp": 1733045678000,
  "deviceId": "sklad-a"
}
```

### 9. –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```json
{"command": "get_version"}
```

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Fandomon (version name –∏ build code).

**–ü—Ä–∏–º–µ—Ä bash:**
```bash
# –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤–µ—Ä—Å–∏—é —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
mosquitto_pub -h broker.hivemq.com -p 1883 \
  -u "username" -P "password" \
  -t "fandomon/sklad-a/commands" \
  -m '{"command": "get_version"}'

# –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤–µ—Ä—Å–∏—é —Å–æ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
mosquitto_pub -h broker.hivemq.com -p 1883 \
  -u "username" -P "password" \
  -t "fandomon/commands" \
  -m '{"command": "get_version"}'
```

**–û—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ MQTT:**
```json
{
  "event_type": "COMMAND_GET_VERSION",
  "message": "Version: 2.5.4 (build 32)",
  "timestamp": 1733045678000,
  "deviceId": "sklad-a",
  "deviceName": "–ü–ª–∞–Ω—à–µ—Ç –°–∫–ª–∞–¥ –ê"
}
```

**–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –≤–µ—Ä—Å–∏–∏:** v2.5.3

### 10. OTA –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞)
```json
{
  "command": "update_app",
  "parameters": {
    "apk_url": "https://github.com/username/FandomonAlarmManager/releases/download/v2.5.4/app-debug.apk",
    "version": "2.5.4"
  }
}
```

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç** –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ OTA (Over-The-Air). –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å" - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±–µ–∑ —É—á–∞—Å—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `apk_url` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ APK —Ñ–∞–π–ª (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è GitHub Releases)
- `version` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π) - —Ü–µ–ª–µ–≤–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä "2.5.4"), –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –µ—Å–ª–∏ —Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è —Ç–∞–∫–∞—è –∂–µ –∏–ª–∏ –Ω–æ–≤–µ–µ

**–ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ (semantic versioning) - –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –µ—Å–ª–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
2. üì• –ó–∞–≥—Ä—É–∑–∫–∞ APK —á–µ—Ä–µ–∑ Android DownloadManager
3. üì¶ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ PackageInstaller API (–±–µ–∑ UI)
4. üîÑ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
5. üì° –í—Å–µ —ç—Ç–∞–ø—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ MQTT

**–ü—Ä–∏–º–µ—Ä bash:**
```bash
# –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–æ v2.5.4
mosquitto_pub -h broker.hivemq.com -p 1883 \
  -u "username" -P "password" \
  -t "fandomon/sklad-a/commands" \
  -m '{
    "command": "update_app",
    "parameters": {
      "apk_url": "https://github.com/yourusername/FandomonAlarmManager/releases/download/v2.5.4/app-debug.apk",
      "version": "2.5.4"
    }
  }'

# –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ (–±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–µ—Ä—Å–∏–∏)
mosquitto_pub -h broker.hivemq.com -p 1883 \
  -u "username" -P "password" \
  -t "fandomon/commands" \
  -m '{
    "command": "update_app",
    "parameters": {
      "apk_url": "https://github.com/yourusername/FandomonAlarmManager/releases/download/v2.5.4/app-debug.apk"
    }
  }'
```

**–°–æ–±—ã—Ç–∏—è OTA —á–µ—Ä–µ–∑ MQTT:**

–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

```json
// 1. –ù–∞—á–∞–ª–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
{
  "event_type": "COMMAND_UPDATE_STARTED",
  "message": "OTA update started - downloading from: https://..., target version: 2.5.4",
  "timestamp": 1733045670000,
  "deviceId": "sklad-a"
}

// 2. –ó–∞–≥—Ä—É–∑–∫–∞ APK
{
  "event_type": "COMMAND_UPDATE_DOWNLOADING",
  "message": "APK download in progress - download ID: 12345",
  "timestamp": 1733045672000,
  "deviceId": "sklad-a"
}

// 3. APK –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ
{
  "event_type": "COMMAND_UPDATE_DOWNLOADED",
  "message": "APK downloaded successfully - starting installation",
  "timestamp": 1733045680000,
  "deviceId": "sklad-a"
}

// 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø—É—â–µ–Ω–∞
{
  "event_type": "COMMAND_UPDATE_INSTALL_STARTED",
  "message": "Automatic APK installation started via PackageInstaller",
  "timestamp": 1733045682000,
  "deviceId": "sklad-a"
}

// 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–ø—É—â–µ–Ω–æ (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω—É–∂–Ω–∞—è –≤–µ—Ä—Å–∏—è)
{
  "event_type": "COMMAND_UPDATE_SKIPPED",
  "message": "Update skipped - already at version 2.5.4",
  "timestamp": 1733045670000,
  "deviceId": "sklad-a"
}
```

**–°–æ–±—ã—Ç–∏—è –æ—à–∏–±–æ–∫ OTA:**

```json
// –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
{
  "event_type": "COMMAND_UPDATE_DOWNLOAD_FAILED",
  "message": "Download failed: Network error",
  "timestamp": 1733045675000,
  "deviceId": "sklad-a"
}

// –û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
{
  "event_type": "COMMAND_UPDATE_INSTALL_FAILED",
  "message": "Installation failed: Package signature mismatch",
  "timestamp": 1733045685000,
  "deviceId": "sklad-a"
}
```

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `PackageInstaller` API –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–µ–∑ UI (Android 5.0+)
- Fallback –Ω–∞ `Intent.ACTION_VIEW` –µ—Å–ª–∏ PackageInstaller –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–ø–æ–∫–∞–∂–µ—Ç –¥–∏–∞–ª–æ–≥ —É—Å—Ç–∞–Ω–æ–≤–∫–∏)
- –¢—Ä–µ–±—É–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ `REQUEST_INSTALL_PACKAGES` –≤ AndroidManifest
- APK —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ `/Download/fandomon-update.apk`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç semantic versioning (2.4.8 < 2.5.0 < 2.5.4)

**–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –≤–µ—Ä—Å–∏–∏:** v2.5.0 (—Å —Ä—É—á–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π), **v2.5.4 (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞)**

**–ü–æ–ª—É—á–µ–Ω–∏–µ APK URL –∏–∑ GitHub Releases:**
1. –°–æ–∑–¥–∞–π—Ç–µ Release –≤ GitHub (Settings ‚Üí Releases ‚Üí Create new release)
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ APK —Ñ–∞–π–ª –≤ Assets
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –Ω–∞ APK (–ø—Ä–∞–≤—ã–π –∫–ª–∏–∫ ‚Üí Copy link address)
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `apk_url`

–ü—Ä–∏–º–µ—Ä URL: `https://github.com/username/FandomonAlarmManager/releases/download/v2.5.4/app-debug.apk`

## –ü—Ä–∏–º–µ—Ä –Ω–∞ Python

```python
import paho.mqtt.client as mqtt
import json

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ MQTT
BROKER = "broker.hivemq.com"
PORT = 1883
USERNAME = "–≤–∞—à_–ª–æ–≥–∏–Ω"
PASSWORD = "–≤–∞—à_–ø–∞—Ä–æ–ª—å"

def –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–∫–æ–º–∞–Ω–¥—É_—É—Å—Ç—Ä–æ–π—Å—Ç–≤—É(device_id, –∫–æ–º–∞–Ω–¥–∞):
    """–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É"""
    client = mqtt.Client()
    client.username_pw_set(USERNAME, PASSWORD)
    client.connect(BROKER, PORT, 60)

    —Ç–æ–ø–∏–∫ = f"fandomon/{device_id}/commands"
    —Å–æ–æ–±—â–µ–Ω–∏–µ = json.dumps({"command": –∫–æ–º–∞–Ω–¥–∞})

    client.publish(—Ç–æ–ø–∏–∫, —Å–æ–æ–±—â–µ–Ω–∏–µ, qos=1)
    print(f"‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ '{–∫–æ–º–∞–Ω–¥–∞}' —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É '{device_id}'")

    client.disconnect()

def –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–≤—Å–µ–º(–∫–æ–º–∞–Ω–¥–∞):
    """–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –í–°–ï–ú —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º"""
    client = mqtt.Client()
    client.username_pw_set(USERNAME, PASSWORD)
    client.connect(BROKER, PORT, 60)

    —Ç–æ–ø–∏–∫ = "fandomon/commands"
    —Å–æ–æ–±—â–µ–Ω–∏–µ = json.dumps({"command": –∫–æ–º–∞–Ω–¥–∞})

    client.publish(—Ç–æ–ø–∏–∫, —Å–æ–æ–±—â–µ–Ω–∏–µ, qos=1)
    print(f"üì¢ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ '{–∫–æ–º–∞–Ω–¥–∞}' –í–°–ï–ú —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º")

    client.disconnect()

# –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
if __name__ == "__main__":
    # –ö–æ–º–∞–Ω–¥–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É
    –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–∫–æ–º–∞–Ω–¥—É_—É—Å—Ç—Ä–æ–π—Å—Ç–≤—É("sklad-a", "restart_fandomat")
    –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–∫–æ–º–∞–Ω–¥—É_—É—Å—Ç—Ä–æ–π—Å—Ç–≤—É("sklad-b", "send_status")

    # –ö–æ–º–∞–Ω–¥–∞ –≤—Å–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º
    –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–≤—Å–µ–º("sync_events")

    # –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    client = mqtt.Client()
    client.username_pw_set(USERNAME, PASSWORD)
    client.connect(BROKER, PORT, 60)

    # –ò–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ 3 –º–∏–Ω—É—Ç—ã
    –∫–æ–º–∞–Ω–¥–∞ = {
        "command": "UPDATE_SETTINGS",
        "parameters": {
            "check_interval": "3",
            "status_interval": "5"
        }
    }
    client.publish("fandomon/sklad-a/commands", json.dumps(–∫–æ–º–∞–Ω–¥–∞), qos=1)

    # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
    client.publish("fandomon/sklad-a/commands", json.dumps({"command": "restart_fandomon"}), qos=1)

    # –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤–µ—Ä—Å–∏—é —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    client.publish("fandomon/sklad-a/commands", json.dumps({"command": "get_version"}), qos=1)

    # –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É —Å–æ–±—ã—Ç–∏–π
    client.publish("fandomon/sklad-a/commands", json.dumps({"command": "clear_events"}), qos=1)

    # OTA –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ –≤–µ—Ä—Å–∏–∏ 2.5.4
    ota_–∫–æ–º–∞–Ω–¥–∞ = {
        "command": "update_app",
        "parameters": {
            "apk_url": "https://github.com/yourusername/FandomonAlarmManager/releases/download/v2.5.4/app-debug.apk",
            "version": "2.5.4"
        }
    }
    client.publish("fandomon/sklad-a/commands", json.dumps(ota_–∫–æ–º–∞–Ω–¥–∞), qos=1)

    client.disconnect()
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Fandomon

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Device ID

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **Fandomon**
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings**
3. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **Device Settings**
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ **Device ID**: –≤–≤–µ–¥–∏—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä: `sklad-a`, `tablet-01`, `ofis`)
5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ **Device Name**: –ø–æ–Ω—è—Ç–Ω–æ–µ –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: `–ü–ª–∞–Ω—à–µ—Ç –°–∫–ª–∞–¥ –ê`)
6. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ **MQTT** –≤–∫–ª—é—á–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ª–æ–≥–∞—Ö

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Device ID –∏ –≤–∫–ª—é—á–µ–Ω–∏—è MQTT, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```
üì° MQTT Command Subscription Summary:
  ‚Ä¢ Broadcast topic: fandomon/commands (for ALL devices)
  ‚Ä¢ Device-specific topic: fandomon/sklad-a/commands (for THIS device only)
  ‚Ä¢ Device ID: sklad-a
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ Device ID
‚ùå –ü–ª–æ—Ö–æ: `device1`, `device2`, `abc123`
‚úÖ –•–æ—Ä–æ—à–æ: `sklad-a`, `ofis-plansheta`, `liniya-1`

### 2. –§–æ—Ä–º–∞—Ç –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–π
–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç: `{–º–µ—Å—Ç–æ}-{–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ}` –∏–ª–∏ `{–º–µ—Å—Ç–æ}-{–Ω–æ–º–µ—Ä}`
- `sklad-a-glavniy`
- `ofis-priem-01`
- `zavod-liniya-3`

### 3. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∏—Ä–æ–∫–æ–≤–µ—â–∞–Ω–∏–µ, –∞ –∫–æ–≥–¥–∞ –∞–¥—Ä–µ—Å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —à–∏—Ä–æ–∫–æ–≤–µ—â–∞–Ω–∏–µ** (`fandomon/commands`) –∫–æ–≥–¥–∞:
- –ù—É–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –Ω–∞ –í–°–ï–• —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- –í—ã–ø–æ–ª–Ω—è–µ—Ç–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–ª–∞–Ω—à–µ—Ç–æ–≤
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç–µ —Å–≤—è–∑—å

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–¥—Ä–µ—Å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã** (`fandomon/{device_id}/commands`) –∫–æ–≥–¥–∞:
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –ø—Ä–æ–±–ª–µ–º–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
- –ü–æ–ª—É—á–∞–µ—Ç–µ —Å—Ç–∞—Ç—É—Å —Å –æ–¥–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –£–ø—Ä–∞–≤–ª—è–µ—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥

–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤ —Ä–∞–±–æ—Ç–µ:

1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –û–î–ù–û–ú —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –∏—Å–ø–æ–ª—å–∑—É—è –∞–¥—Ä–µ—Å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ç–≤–µ—á–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ MQTT –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
4. –ó–∞—Ç–µ–º –º–∞—Å—à—Ç–∞–±–∏—Ä—É–π—Ç–µ –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥

### –õ–æ–≥–∏ MQTT –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

–ö–æ–≥–¥–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É, –≤ –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç:

**–®–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞:**
```
üì• BROADCAST command received on [fandomon/commands]: {"command":"restart_fandomat"}
üîç Parsing BROADCAST command: {"command":"restart_fandomat"}
‚úÖ Command parsed successfully: restart_fandomat (source: BROADCAST)
```

**–ê–¥—Ä–µ—Å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞:**
```
üì• TARGETED command received on [fandomon/sklad-a/commands]: {"command":"restart_fandomat"}
üîç Parsing TARGETED command: {"command":"restart_fandomat"}
‚úÖ Command parsed successfully: restart_fandomat (source: TARGETED)
```

### –°–æ–±—ã—Ç–∏—è –≤ –æ—Ç–≤–µ—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç —Å–æ–±—ã—Ç–∏—è –æ–±—Ä–∞—Ç–Ω–æ:

**–¢–æ–ø–∏–∫ —Å–æ–±—ã—Ç–∏–π:** `fandomon/events` (–∏–ª–∏ –≤–∞—à –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π)
```json
{
  "id": 123,
  "eventType": "FANDOMAT_RESTARTING",
  "timestamp": 1729516800000,
  "message": "Attempting automatic restart of Fandomat",
  "deviceId": "sklad-a",
  "deviceName": "–ü–ª–∞–Ω—à–µ—Ç –°–∫–ª–∞–¥ –ê"
}
```

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∞–¥—Ä–µ—Å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Device ID –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö**
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Device ID —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - Device ID —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É: `Sklad-A` ‚â† `sklad-a`

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ MQTT –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ MQTT –≤–∫–ª—é—á–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ broker URL, –ø–æ—Ä—Ç, –ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ç–æ–ø–∏–∫–∞**
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ: `fandomon/sklad-a/commands`
   - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: `fandomon/sklad-a/command` (–±–µ–∑ 's')
   - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: `fandomon/commands/sklad-a`

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–æ–¥–ø–∏—Å–∫–∏**
   - –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å: "‚úÖ Subscribed to DEVICE-SPECIFIC commands: fandomon/{id}/commands"
   - –ï—Å–ª–∏ –Ω–µ—Ç, –≤–æ–∑–º–æ–∂–Ω–æ MQTT –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å

### –í—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ –∞–¥—Ä–µ—Å–Ω—É—é –∫–æ–º–∞–Ω–¥—É

- –í–æ–∑–º–æ–∂–Ω–æ —É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π Device ID**
- –ö–∞–∂–¥–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –î–û–õ–ñ–ù–û –∏–º–µ—Ç—å **—É–Ω–∏–∫–∞–ª—å–Ω—ã–π** Device ID
- –ò–∑–º–µ–Ω–∏—Ç–µ Device ID –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –∏—Ö —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏

## –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç

–í –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
python test_targeted_commands.py
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º
- –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —à–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- –ó–∞–ø—É—Å–∫–∞—Ç—å –¥–µ–º–æ-—Å—Ü–µ–Ω–∞—Ä–∏–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

## –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–µ—Ä—Å–∏–∏

- **–ê–¥—Ä–µ—Å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã:** v2.3.4
- **–ö–æ–º–∞–Ω–¥–∞ GET_VERSION –¥–æ–±–∞–≤–ª–µ–Ω–∞:** v2.5.3
- **OTA –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å —Ä—É—á–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π:** v2.5.0
- **OTA –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π:** v2.5.4
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ç—Ä–µ–±—É–µ–º–∞—è –≤–µ—Ä—Å–∏—è:** v2.3.4+
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –î–∞, —à–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏—è—Ö

## –ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞

| –§—É–Ω–∫—Ü–∏—è | –®–∏—Ä–æ–∫–æ–≤–µ—â–∞–Ω–∏–µ | –ê–¥—Ä–µ—Å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ |
|---------|---------------|------------------|
| –§–æ—Ä–º–∞—Ç —Ç–æ–ø–∏–∫–∞ | `fandomon/commands` | `fandomon/{device_id}/commands` |
| –ö—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç | –í–°–ï —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ | –û–î–ù–û —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ |
| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã | –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
| –¢—Ä–µ–±—É–µ—Ç—Å—è Device ID | –ù–µ—Ç | –î–∞ |
| –ü—Ä–∏–º–µ—Ä | –°—Ç–∞—Ç—É—Å —Å–æ –≤—Å–µ—Ö | –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ |

---

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**
- [TARGETED_COMMANDS.md](TARGETED_COMMANDS.md) - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- [–ö–û–ú–ê–ù–î–´_HIVEMQ.md](–ö–û–ú–ê–ù–î–´_HIVEMQ.md) - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º MQTT
- [REMOTE_COMMANDS_TESTING.md](REMOTE_COMMANDS_TESTING.md) - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
